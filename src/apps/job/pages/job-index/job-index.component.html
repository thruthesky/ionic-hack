<base-header [title]="title"></base-header>
<section class="content">
  <nav>
    <a class="btn btn-primary" role="button" routerLink="/job" routerLinkActive="active">JOB</a>
    <a class="btn btn-primary" role="button" routerLink="/job/post" routerLinkActive="active">POST</a>
    <a class="btn btn-primary" role="button" routerLink="/job/list" routerLinkActive="active">LIST</a>
  </nav>
  <br/>
  <div class="form-group row">
    <label class="col-xs-3 col-form-label"  for="workProfession">Work Profession</label>
    <div class="col-xs-9">
      <select class="form-control" id="workProfession" name="workProfession" [(ngModel)]="query.sub_category" (change)="search()">
        <option value="all">All</option>
        <option value="housemaid">House Maid</option>
        <option value="driver">Driver</option>
      </select>
    </div>
  </div>
  <div class="form-group row">
    <label class="col-xs-3" for="workExperience">Work Experience</label>
    <div class="col-xs-9">
      <select class="form-control" id="workExperience" name="workExperience" [(ngModel)]="query.int_1" (change)="search()">
        <option value="all">All</option>
        <option value="0">No Work Experience</option>
        <option *ngFor="let number of numbers" [value]="number">{{number}} years</option>
      </select>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-xs-3 col-form-label">Province</label>
    <div class="col-xs-9">
      <select class="form-control" id="searchByProvince" name="province" [(ngModel)]="query.varchar_2" (change)="onClickProvince()">
        <option value="all">All</option>
        <option *ngFor="let province of provinces" [value]="province">{{province}}</option>
      </select>
    </div>
  </div>

  <div class="form-group row" *ngIf="showCities">
    <label class="col-xs-3 col-form-label" *ngIf="showCities">City</label>
    <div class="col-xs-9">
      <select class="form-control" id="searchByCities" name="city" [(ngModel)]="query.varchar_3" (change)="search()">
        <option value="all">All</option>
        <option *ngFor="let key of cityKeys" [value]="key">{{cities[key]}}</option>
      </select>
    </div>
  </div>

  <div class="form-group row">
    <label for="name" class="col-xs-3 col-form-label">Search By Name</label>
    <div class="col-xs-9">
      <input class="form-control" type="text" id="name"  [(ngModel)]="query.name" (keyup)="onChange()" placeholder="Input Name...">
    </div>
  </div>

  <div class="form-group row">
    <label class="col-xs-3 col-form-label">Gender</label>
    <div class="col-xs-9">
      <label class="form-check-inline col-xs-3">
        <input class="form-check-input" type="radio" name="genderRadio" id="both" value="all" [(ngModel)]="query.gender" (change)="search()"> All
      </label>
      <label class="form-check-inline col-xs-3">
        <input class="form-check-input" type="radio" name="genderRadio" id="male" value="M" [(ngModel)]="query.gender" (change)="search()"> Male
      </label>
      <label class="form-check-inline col-xs-3">
        <input class="form-check-input" type="radio" name="genderRadio" id="female" value="F" [(ngModel)]="query.gender" (change)="search()"> Female
      </label>
    </div>
  </div>

<div class="form-group row">
  <label class="col-xs-3 col-form-label">Age Range</label>
  <div class="col-xs-9">
    <label class="col-sm-2">Min</label>
    <div class="col-sm-4">
      <select class="form-control" id="searchByMinAge" name="minAge" [(ngModel)]="minAgeSelected" (change)="minRangeChange()">
        <option [value]="minAge">{{minAge}}</option>
        <option *ngFor="let min of minAgeRange" [value]="min+minAge">{{min+minAge}}</option>
      </select>
    </div>
    <label class="col-sm-2">Max</label>
    <div class="col-sm-4">
      <select class="form-control" id="searchByMaxAge" name="maxAge" [(ngModel)]="maxAgeSelected" (change)="maxRangeChange()">
        <option *ngFor="let max of maxAgeRange" [value]="max+betweenAge">{{max+betweenAge}}</option>
        <option [value]="maxAge">{{maxAge}}</option>
      </select>
    </div>
  </div>
</div>

  <div *ngIf="searching">
    <i class="fa fa-spinner fa-pulse fa-fw"></i>
    <span class="sr-only">Loading...</span>
  </div>
  <div *ngIf=" pages.length " class="pages">
    <div *ngFor=" let page of pages " class="page posts">
      <div class="post" *ngFor=" let post of page.search; let i = index; ">
        <div class="card card-block">
          <div class="profile col-sm-3 col-md-3">
            <img class="profile-photo" src="{{post.photos.length ? post.photos[0]['url_thumbnail'] : urlPhoto}}" alt="Card image {{i+1}}">
          </div>
          <div class="col-sm-9 col-md-9">
            <div>
              <h4 class="card-title">{{post.text_1}} {{post.text_2}} {{post.text_3}}</h4>
              <p class="card-text">Profession : {{post.sub_category}}</p>
              <p class="card-text">Work Experience : {{post.int_1}}</p>
            </div>
            <ul class="list-group list-group-flush" *ngIf="moreButton[i]">
              <li class="list-group-item">Gender : {{ post.char_1=='M' ? 'Male' : 'Female'}}</li>
              <li class="list-group-item">Age : {{currentYear - post.int_2}}</li>
              <li class="list-group-item">Mobile : {{post.varchar_4}}</li>
              <li class="list-group-item">Address : {{post.varchar_1}}</li>
              <li class="list-group-item">Province : {{post.varchar_2}}</li>
              <li class="list-group-item">City : {{post.varchar_3}}</li>
              <li class="list-group-item">Applicant Message : {{post.varchar_6}}</li>
            </ul>
            <div class="btn-group" role="group">
              <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
              <button type="button" class="btn btn-secondary" (click)="moreButton[i] = !moreButton[i]" >{{moreButton[i] ? 'Less' : 'More' }}</button>
              <button type="button" class="btn btn-secondary" (click)="onClickEdit(post.idx)">Edit</button>
              <button type="button" class="btn btn-secondary" (click)="onClickDelete(post)">Delete</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<base-footer></base-footer>

