<template ngbModalContainer></template>
<base-header [title]="title"></base-header>

<section class="content">
    post list html
    <button (click)="onClickPostCreate()">Post Write</button>

    <div *ngIf=" pages.length " class="pages"
        infinite-scroll
            [infiniteScrollDistance]="0.5"
            [infiniteScrollUpDistance]="1.1"
            [infiniteScrollThrottle]="500"
            (scrolled)="onScrollDown()"
            (scrolledUp)="onScrollUp()"
    >
        <div *ngFor=" let page of pages " class="page posts">
            <article class="post" *ngFor=" let post of page.posts ">
                <div class="post-header">
                    <h2 class="post-header-title">{{ post.subject }}</h2>
                    idx: {{ post.idx }}
                    <button (click)="onClickPostEdit( post.idx )">Edit</button>
                    <button (click)="onClickPostDelete( post.idx )">Delete</button>
                </div>

                <div class="post-content" innerHTML="{{ post.content }}">
                </div>
                
                <div *ngIf=" post.photos.length " class="post-uploaded-files">
                    <img *ngFor=" let photo of post.photos " [src]=" photo.url_thumbnail ">
                </div>

                <comment-edit></comment-edit>
                
                <div class="comments" *ngIf=" post.comments ">
                    <article class="comment" *ngFor=" let comment of post.comments " [attr.depth]="comment.depth">
                        No. {{ comment.idx }}
                        
                        <button (click)="onClickCommentReply( comment, post )">Reply</button>
                        <button (click)="onClickCommentEdit( comment, post )">Edit</button>
                        <button (click)="onClickCommentDelete( comment, post )">DELETE</button>
                        <button (click)="onClickCommentLike( comment, post )">Like</button>
                        <button (click)="onClickCommentDislike( comment, post )">Dislike</button>
                        <button (click)="onClickCommentReport( comment, post )">Report</button>
                        <button (click)="onClickCommentMove( comment, post )">Move</button>
                    

                        <div innerHTML="{{ comment.content }}"></div>
                        
                        <div *ngIf=" comment.photos.length " class="comment-uploaded-files">
                            <img *ngFor=" let photo of comment.photos " [src]=" photo.url_thumbnail ">
                        </div>


                    </article>
                </div>

            </article><!-- post -->
        </div><!--/page posts-->
    </div><!--pages-->
</section>


<base-footer></base-footer>

